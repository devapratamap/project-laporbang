<!DOCTYPE html>
<html>

<head>
    <title>Berita | LaporBang</title>
    {% include 'meta.html' %}
    <script>
        $(document).ready(function () {
            // Ketika dokumen siap, panggil fungsi get_posts dengan parameter username dari user_info
            get_news_post();
            
            
        });

        // function news_post() {
        //     const judul = $("#judul").val();
        //     const news_deskripsi = $("#news_deskripsi").val();
        //     const today = new Date().toISOString();
        //     const fileInput = document.getElementById("imageInput");
        //     const file = fileInput.files[0];
        //     const formData = new FormData();
        //     formData.append("judul", judul);
        //     formData.append("news_deskripsi", news_deskripsi);
        //     formData.append("date_give", today);
        //     formData.append("image", file);
        //     $.ajax({
        //         type: "POST",
        //         url: "/news_posting",
        //         data: formData,
        //         contentType: false,
        //         processData: false,
        //         success: function (response) {
        //             $("#modal-post").removeClass("is-active");
        //             window.location.reload();
        //         },
        //     });
        // }
    </script>
    

</head>

{% include 'navbar.html' %}

<body>
    <section class="section">
        <article class="media">
            {% if logged_in %}
            <figure class="media-left" style="align-self: center">
                <a class="image is-32x32" href="/user/{{ user_info.username }}">
                    <img class="is-rounded" src="{{ url_for('static', filename=user_info.profile_pic_real )
                        }}">
                </a>
            </figure>
            {% endif %}
            <div class="media-content">
                <div class="field">
                    <p class="control">
                        <input id="input-post" class="input is-rounded" placeholder="Tambah Berita"
                            onclick='$("#modal-post").addClass("is-active")' />
                    <div class="modal" id="modal-post">
                        <div class="modal-background" onclick='$("#modal-post").removeClass("is-active")'></div>
                        <div class="modal-content">
                            <div class="box">
                                <article class="media">
                                    <div class="media-content is-black">
                                        <div class="field">
                                            <p class="control is-expanded">
                                                <input class="input" type="text" id="judul" placeholder="Judul">
                                                <textarea id="news_deskripsi" class="textarea"
                                                    placeholder="Deskripsi"></textarea>
                                            </p>
                                            <div
                                                    class="file has-name is-fullwidth">
                                                    <label
                                                        class="file-label">
                                                        <input
                                                            class="file-input"
                                                            type="file"
                                                            name="image"
                                                            id="imageInput"
                                                            accept="image/*">
                                                        <span
                                                            class="file-cta">
                                                            <span
                                                                class="file-icon">
                                                                <i
                                                                    class="fa fa-upload"></i>
                                                            </span>
                                                            <span
                                                                class="file-label">
                                                                Upload
                                                                Gambar
                                                            </span>
                                                        </span>
                                                        <span
                                                            class="file-name"></span>
                                                    </label>
                                                </div>
                                        </div>
                                        <nav class="level is-mobile">
                                            <div class="level-left">

                                            </div>
                                            <div class="level-right">
                                                <div class="level-item">
                                                    <a class="button is-blue" onclick="news_post()">Tambahkan Berita</a>
                                                </div>
                                                <div class="level-item">
                                                    <a class="button is-blue is-outlined"
                                                        onclick='$("#modal-post").removeClass("is-active")'>Kembali</a>
                                                </div>
                                            </div>
                                        </nav>
                                    </div>
                                </article>
                            </div>
                        </div>
                        <button class="modal-close is-large" aria-label="close"
                            onclick='$("#modal-post").removeClass("is-active")'></button>
                    </div>
                    </p>
                </div>
            </div>
        </article>
    </section>

    <!-- content -->
    <section class="section">
        <div id="post-box" class="container">
            
        </div>
    </section>
    <!-- end content -->

    {% include 'footer.html' %}

</body>

</html>